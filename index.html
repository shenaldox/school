<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jayapala School - Grade 10 System</title>
    
    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CSS Reset & Variables --- */
        :root {
            --primary-color: #4e54c8;
            --secondary-color: #8f94fb;
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-color: #fff;
            --text-dark: #333;
            --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --owner-gold: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Noto Sans Sinhala', sans-serif;
        }

        body {
            background: linear-gradient(45deg, #1cb5e0 0%, #000851 100%);
            min-height: 100vh;
            color: var(--text-color);
            overflow-x: hidden;
            background-image: url('https://picsum.photos/seed/school123/1920/1080'); /* School Theme BG */
            background-size: cover;
            background-attachment: fixed;
            background-blend-mode: overlay;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* --- Glassmorphism Utilities --- */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            padding-top: 100px; /* Space for fixed header */
        }

        /* --- Navigation Bar --- */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .nav-links li a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .nav-links li a:hover, .nav-links li a.active {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 15px rgba(78, 84, 200, 0.4);
        }

        .user-badge {
            display: none; /* Hidden by default */
            background: var(--primary-color);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            align-items: center;
            gap: 5px;
            animation: fadeIn 0.5s ease;
        }

        .owner-badge {
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            color: #000;
            display: none;
        }

        /* --- Sections General --- */
        section {
            display: none; /* All sections hidden initially */
            animation: fadeIn 0.6s ease-out;
        }

        section.active-section {
            display: block;
        }

        h2.section-title {
            margin-bottom: 30px;
            text-align: center;
            font-size: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border-bottom: 2px solid rgba(255,255,255,0.2);
            display: inline-block;
            padding-bottom: 10px;
        }

        /* --- Home Section --- */
        .hero {
            text-align: center;
            padding: 50px 20px;
        }
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #fff, #a1c4fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- Cards (Teacher, Credits, Students) --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .card {
            padding: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid var(--secondary-color);
            object-fit: cover;
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .card p {
            color: rgba(255,255,255,0.9);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* --- Forms (Login, Register, Reports) --- */
        .form-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 40px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }

        .form-control:focus {
            background: rgba(255,255,255,0.2);
            border-color: var(--secondary-color);
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            font-size: 1rem;
        }

        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* --- Chat Room --- */
        .chat-container {
            height: 70vh;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 0.95rem;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .msg-left {
            align-self: flex-start;
            background: rgba(255,255,255,0.2);
            border-bottom-left-radius: 2px;
        }

        .msg-right {
            align-self: flex-end;
            background: var(--primary-color);
            color: #fff;
            border-bottom-right-radius: 2px;
        }

        .msg-owner {
            background: linear-gradient(135deg, #ffd700, #b8860b);
            color: #000;
            font-weight: bold;
            align-self: center;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            border: 1px solid #fff;
        }

        .msg-sender {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: 4px;
            display: block;
        }

        .chat-input-area {
            padding: 15px;
            display: flex;
            gap: 10px;
            background: rgba(0,0,0,0.2);
        }

        /* --- Reports --- */
        #report-list {
            margin-top: 30px;
        }
        .report-item {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
        }

        /* --- Notifications --- */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 15px 25px;
            border-radius: 8px;
            border-left: 5px solid #00ff88;
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 2000;
        }
        .toast.show {
            transform: translateX(0);
        }

        /* --- Mobile Responsive --- */
        @media (max-width: 768px) {
            .nav-links {
                display: none; /* In a real app, add a hamburger menu */
            }
            /* Simple mobile nav for demo */
            .nav-links.mobile-active {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 70px;
                left: 0;
                width: 100%;
                background: rgba(0,0,0,0.9);
                padding: 20px;
            }
            nav {
                padding: 15px;
            }
            .menu-toggle {
                display: block;
                color: #fff;
                font-size: 1.5rem;
                cursor: pointer;
            }
        }
        @media (min-width: 769px) {
            .menu-toggle {
                display: none;
            }
        }
    </style>
</head>
<body>

    <!-- Header / Navigation Bar -->
    <nav class="glass">
        <div class="logo">
            <i class="fas fa-school"></i> Jayapala School
        </div>
        
        <div class="menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </div>

        <ul class="nav-links" id="navLinks">
            <li><a href="#" onclick="navigate('home')" class="active">Home</a></li>
            <li><a href="#" onclick="navigate('students')">‡∑É‡∑í‡∑É‡∑î‡∂±‡∑ä</a></li>
            <li><a href="#" onclick="navigate('teacher')">‡∂¥‡∂±‡∑ä‡∂≠‡∑í‡∂∑‡∑è‡∂ª ‡∂ú‡∑î‡∂ª‡∑î‡∂≠‡∑î‡∂∏‡∑í‡∂∫</a></li>
            <li><a href="#" onclick="navigate('chat')">Chat Room</a></li>
            <li><a href="#" onclick="navigate('reports')">Report Sending</a></li>
            <li><a href="#" onclick="navigate('credits')">About Credit</a></li>
            
            <li id="nav-login"><a href="#" onclick="navigate('login')">Login</a></li>
            <li id="nav-register"><a href="#" onclick="navigate('register')">Register</a></li>
            <li id="nav-logout" style="display:none;"><a href="#" onclick="logout()">Logout</a></li>
        </ul>

        <div id="user-display" class="user-badge">
            <i class="fas fa-user-check"></i> <span id="username-span"></span>
        </div>
        <div id="owner-display" class="user-badge owner-badge">
            <i class="fas fa-crown"></i> OWNER
        </div>
    </nav>

    <div class="container">

        <!-- 1. Home Section -->
        <section id="home" class="active-section">
            <div class="hero glass">
                <h1>Grade 10 - Class of 2024</h1>
                <p>Jayapala School, Karukkuliya</p>
                <br>
                <p style="font-size: 1.1rem; max-width: 600px; margin: 0 auto;">
                    ‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂¥‡∂±‡∑ä‡∂≠‡∑í‡∂∫‡∑ö ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î, ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í ‡∑É‡∑Ñ ‡∑É‡∑Ñ‡∂∫‡∑ù‡∂ú‡∂∫ ‡∑Ñ‡∑î‡∑Ä‡∂∏‡∑è‡∂ª‡∑î ‡∂ö‡∂ª ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂´‡∂∫ ‡∂ö‡∂ª ‡∂á‡∂≠‡∑í ‡∂±‡∑Ä‡∑ì‡∂± ‡∑Ä‡∑ô‡∂∂‡∑ä ‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫‡∂∫‡∑í.
                </p>
                <br>
                <button class="btn" style="width: auto; padding: 10px 30px;" onclick="navigate('students')">View Students</button>
            </div>
        </section>

        <!-- 2. Students Section -->
        <section id="students">
            <center><h2 class="section-title">Grade 10 - ‡∑É‡∑í‡∑É‡∑î‡∂±‡∑ä‡∂ú‡∑ö ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î</h2></center>
            <div class="grid-container" id="student-grid">
                <!-- Javascript will populate this -->
            </div>
        </section>

        <!-- 3. Teacher Section -->
        <section id="teacher">
            <center><h2 class="section-title">‡∂¥‡∂±‡∑ä‡∂≠‡∑í‡∂∑‡∑è‡∂ª ‡∂ú‡∑î‡∂ª‡∑î‡∂≠‡∑î‡∂∏‡∑í‡∂∫</h2></center>
            <div class="glass card" style="max-width: 500px; margin: 0 auto;">
                <img src="https://ui-avatars.com/api/?name=Pavithra+Hirushini&background=8f94fb&color=fff&size=150" alt="Teacher" class="avatar">
                <h3>M.R.S. Pavithra Hirushini</h3>
                <p style="font-weight: bold; color: var(--secondary-color);">Grade 10 Class Teacher</p>
                <br>
                <p>"‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂ú‡∑ö ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂ö‡∑ê‡∂¥‡∑Ä‡∑ì ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂∏‡∑è‡∂ª‡∑ä‡∂ú‡∂∫‡∑ù‡∂≠‡∑ä‡∂∏‡∂ö ‡∂Ü‡∂Ø‡∂ª‡∑ä‡∑Å‡∂∫‡∂∫‡∑í."</p>
            </div>
        </section>

        <!-- 4. Chat Room -->
        <section id="chat">
            <center><h2 class="section-title">Class Chat Room</h2></center>
            <div class="glass chat-container">
                <div class="chat-messages" id="chat-box">
                    <!-- Messages go here -->
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" class="form-control" placeholder="‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±..." onkeypress="handleChatEnter(event)">
                    <button class="btn" style="width: auto;" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </section>

        <!-- 5. Report Sending -->
        <section id="reports">
            <center><h2 class="section-title">Report Sending System</h2></center>
            
            <div class="glass form-container">
                <h3 style="margin-bottom: 20px;">‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä Report ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</h3>
                <div class="form-group">
                    <label>‡∂∫‡∑Ä‡∂±‡∑ä‡∂±‡∑è‡∂ú‡∑ö ‡∂±‡∂∏</label>
                    <input type="text" id="rep-name" class="form-control" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏">
                </div>
                <div class="form-group">
                    <label>‡∑Ä‡∑í‡∑Ç‡∂∫‡∂∫</label>
                    <input type="text" id="rep-subject" class="form-control" placeholder="‡∑Ä‡∑í‡∑Ç‡∂∫">
                </div>
                <div class="form-group">
                    <label>‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫</label>
                    <textarea id="rep-msg" class="form-control" rows="4" placeholder="‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª..."></textarea>
                </div>
                <button class="btn" onclick="submitReport()">Submit Report</button>
            </div>

            <div id="report-list-container" style="display: none; margin-top: 40px;">
                <h3 style="margin-bottom: 15px; border-bottom: 1px solid #fff;">Received Reports (Owner Only)</h3>
                <div id="report-list">
                    <!-- Reports load here -->
                </div>
            </div>
        </section>

        <!-- 6. Credit Page -->
        <section id="credits">
            <center><h2 class="section-title">About Credit</h2></center>
            <div class="glass card" style="max-width: 400px; margin: 0 auto; animation: float 6s ease-in-out infinite;">
                <img src="https://picsum.photos/seed/shenal/150/150" alt="Shenal" class="avatar" style="border-color: var(--owner-gold);">
                <h3 style="color: var(--owner-gold);">Shenal Anuhas</h3>
                <p style="margin-bottom: 10px;"><strong>Age:</strong> 15+</p>
                <p style="margin-bottom: 20px;">Full Stack Developer | Web Designer</p>
                
                <a href="https://t.me/Crypto_RIV" target="_blank" class="btn" style="background: #0088cc;">
                    <i class="fab fa-telegram-plane"></i> Telegram
                </a>
            </div>
        </section>

        <!-- 7. Login Page -->
        <section id="login">
            <center><h2 class="section-title">Login</h2></center>
            <div class="glass form-container">
                <div class="form-group">
                    <label>‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏</label>
                    <input type="text" id="login-name" class="form-control" placeholder="User Name">
                </div>
                <div class="form-group">
                    <label>‡∂∏‡∑î‡∂ª‡∂¥‡∂Ø‡∂∫</label>
                    <input type="password" id="login-pass" class="form-control" placeholder="Password">
                </div>
                <button class="btn" onclick="login()">Login</button>
                <p style="margin-top: 15px; text-align: center; font-size: 0.9rem;">
                    ‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∂ö‡∑ä ‡∂±‡∑ê‡∂≠‡∑ä‡∂±‡∂∏‡∑ä? <a href="#" onclick="navigate('register')" style="color: var(--secondary-color);">Register ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</a>
                </p>
            </div>
        </section>

        <!-- 8. Register Page -->
        <section id="register">
            <center><h2 class="section-title">Register</h2></center>
            <div class="glass form-container">
                <div class="form-group">
                    <label>‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏</label>
                    <input type="text" id="reg-name" class="form-control" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏">
                </div>
                <div class="form-group">
                    <label>‡∂∏‡∑î‡∂ª‡∂¥‡∂Ø‡∂∫</label>
                    <input type="password" id="reg-pass" class="form-control" placeholder="Password ‡∑É‡∑ë‡∂Ø‡∑ì‡∂∏">
                </div>
                <button class="btn" onclick="register()">Create Account</button>
                <p style="margin-top: 15px; text-align: center; font-size: 0.9rem;">
                    ‡∂Ø‡∑ê‡∂±‡∂ß‡∂∏‡∂≠‡∑ä ‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∂ö‡∑ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø? <a href="#" onclick="navigate('login')" style="color: var(--secondary-color);">Login ‡∑Ä‡∂±‡∑ä‡∂±</a>
                </p>
            </div>
        </section>

    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Operation Successful</div>

    <script>
        // --- Data Section ---
        const studentsData = [
            { name: "‡∂â‡∑Ç‡∑è‡∂±‡∑ä ‡∂±‡∑ô‡∂≠‡∑ä‡∂∏‡∑í‡∂ö", desc: "‡∂â‡∑Ç‡∑è‡∂±‡∑ä ‡∑Ñ‡∑ú‡∂≥ ‡∂ú‡∑î‡∂´‡∂ú‡∂≠‡∑í‡∂ö ‡∂Ø‡∂ª‡∑î‡∑Ä‡∑ô‡∂ö‡∑í. ‡∂±‡∂∏‡∑î‡∂≠‡∑ä ‡∂Ü‡∂Ø‡∂ª ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä‡∑ô‡∂±‡∑ä ‡∂î‡∑Ñ‡∑î‡∂ú‡∑ö ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫‡∂ß ‡∂∂‡∑è‡∂∞‡∑è ‡∑Ä‡∑ì ‡∂á‡∂≠.", color: "#ff7675" },
            { name: "‡∑Ñ‡∑í‡∂∏‡∑è‡∑Ç‡∑ä ‡∑É‡∂Ç‡∂¢‡∂±", desc: "‡∂¥‡∑É‡∑î‡∂ú‡∑í‡∂∫ ‡∑Ä‡∑É‡∂ª ‡∂ö‡∑í‡∑Ñ‡∑í‡∂¥‡∂∫ ‡∂≠‡∑î‡∑Ö ‡∂¥‡∑è‡∑É‡∂Ω‡∑ä ‡∂¥‡∑ê‡∂∏‡∑í‡∂´‡∑ì‡∂∏ ‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ì ‡∂á‡∂≠.", color: "#74b9ff" },
            { name: "‡∂â‡∑É‡∑î‡∂ª‡∑î ‡∂∏‡∂Ø‡∑î‡∑É‡∂Ç‡∂õ", desc: "‡∂â‡∂≠‡∑è ‡∂ã‡∂±‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä‡∑ô‡∂±‡∑ä ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂ö‡∂ª‡∂∫‡∑í. ‡∂ö‡∂≠‡∑è ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂¥‡∑è‡∂Ω‡∂±‡∂∫ ‡∂ö‡∂ª‡∂ú‡∂≠ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.", color: "#55efc4" },
            { name: "‡∂±‡∑Ä‡∑ì‡∂±‡∑ä ‡∂≠‡∂ª‡∑î‡∑Ç", desc: "‡∂â‡∂≠‡∑è ‡∂∂‡∑î‡∂Ø‡∑ä‡∂∞‡∑í‡∂∏‡∂≠‡∑ä ‡∂Ø‡∂ª‡∑î‡∑Ä‡∑ô‡∂ö‡∑í. ‡∑Å‡∑í‡∑Ç‡∑ä‚Äç‡∂∫‡∂≠‡∑ä‡∑Ä ‡∑Ä‡∑í‡∂∑‡∑è‡∂ú‡∂∫‡∑ô‡∂±‡∑ä ‡∂Ω‡∂ö‡∑î‡∂´‡∑î 153‡∂ö‡∑ä ‡∂Ω‡∂∂‡∑è ‡∂á‡∂≠.", color: "#ffeaa7" },
            { name: "‡∂∏‡∑è‡∂Ω‡∑í‡∂Ø‡∑î ‡∑Ñ‡∑í‡∂ª‡∑î‡∑Ç‡∑è‡∂±‡∑ä", desc: "‡∂â‡∂≠‡∑è ‡∂ö‡∑ê‡∂¥‡∑Ä‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂ö‡∂ª‡∂± ‡∂Ø‡∂ª‡∑î‡∑Ä‡∑ô‡∂ö‡∑í.", color: "#a29bfe" },
            { name: "‡∂≠‡∑í‡∂ö‡∑ä‡∑Ç‡∂´ ‡∑Ä‡∑í‡∂Ø‡∑î‡∂ª‡∂Ç‡∂ú", desc: "‡∂ã‡∂±‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä‡∑ô‡∂±‡∑ä ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∂Ö‡∂∑‡∑í‡∂∫‡∑ù‡∂ú ‡∂¢‡∂∫‡∂ú‡∂≠ ‡∑Ñ‡∑ê‡∂ö‡∑í ‡∂Ø‡∂ª‡∑î‡∑Ä‡∑ô‡∂ö‡∑í. ‡∑É‡∑î‡∂∑ ‡∂¥‡∑ê‡∂≠‡∑î‡∂∏‡∑ä.", color: "#fd79a8" },
            { name: "‡∑É‡∂Ç‡∂¢‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∂∂‡∂≠‡∑ä", desc: "Free Fire ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä‡∂ß ‡∂á‡∂∂‡∑ä‡∂∂‡∑ê‡∑Ñ‡∑í‡∑Ä‡∑ì‡∂∏ ‡∂±‡∑í‡∑É‡∑è ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂±‡∑ú‡∑É‡∂Ω‡∂ö‡∑è ‡∑Ñ‡∂ª‡∑í‡∂∏‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì.", color: "#e17055" },
            { name: "‡∑Å‡∑ô‡∂±‡∑è‡∂Ω‡∑ä ‡∂Ö‡∂±‡∑î‡∑Ñ‡∑É‡∑ä", desc: "‡∂∏‡∑ô‡∂∏ ‡∑Ä‡∑ô‡∂∂‡∑ä‡∑É‡∂∫‡∑í‡∂ß‡∑ä ‡∂ë‡∂ö ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂´‡∂∫ ‡∂ö‡∑Ö ‡∂∂‡∑ê‡∑Ä‡∑í‡∂±‡∑ä, ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠.", color: "#6c5ce7", isOwner: true },
            { name: "‡∂≠‡∑è‡∂ª‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑É‡∂±‡∑ä‡∂±", desc: "‡∂≠‡∑è‡∂ª‡∂ö ‡∂ú‡∑ê‡∂± ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂±‡∑ú‡∂Ø‡∂ö‡∑ä‡∑Ä‡∂∫‡∑í üòê", color: "#b2bec3" }
        ];

        // --- State Management ---
        let currentUser = null;
        let isOwner = false;

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderStudents();
            checkSession();
            loadChat();
        });

        // --- Navigation Logic ---
        function navigate(sectionId) {
            // Hide all sections
            document.querySelectorAll('section').forEach(sec => sec.classList.remove('active-section'));
            document.querySelectorAll('.nav-links a').forEach(link => link.classList.remove('active'));

            // Show target section
            document.getElementById(sectionId).classList.add('active-section');
            
            // Highlight nav item
            // Simple approximation for active class logic
            const links = document.querySelectorAll('.nav-links a');
            links.forEach(link => {
                if(link.getAttribute('onclick').includes(sectionId)) {
                    link.classList.add('active');
                }
            });

            // Close mobile menu if open
            document.getElementById('navLinks').classList.remove('mobile-active');

            // If navigating to reports, check owner status to show list
            if(sectionId === 'reports') {
                loadReports();
            }
        }

        function toggleMobileMenu() {
            document.getElementById('navLinks').classList.toggle('mobile-active');
        }

        // --- Render Students ---
        function renderStudents() {
            const grid = document.getElementById('student-grid');
            grid.innerHTML = '';
            
            studentsData.forEach((student, index) => {
                const avatarUrl = student.isOwner 
                    ? `https://ui-avatars.com/api/?name=${student.name}&background=ffd700&color=000&bold=true`
                    : `https://ui-avatars.com/api/?name=${student.name}&background=random`;

                const card = document.createElement('div');
                card.className = 'glass card';
                card.innerHTML = `
                    <img src="${avatarUrl}" alt="${student.name}" class="avatar">
                    <h3>${student.name} ${student.isOwner ? '<i class="fas fa-crown" style="color: gold;"></i>' : ''}</h3>
                    <p>${student.desc}</p>
                `;
                grid.appendChild(card);
            });
        }

        // --- Authentication System ---
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function checkSession() {
            const user = localStorage.getItem('currentUser');
            if (user) {
                const userData = JSON.parse(user);
                loginSuccess(userData.name, userData.isOwner, false);
            }
        }

        function register() {
            const name = document.getElementById('reg-name').value.trim();
            const pass = document.getElementById('reg-pass').value.trim();

            if (!name || !pass) {
                showToast("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∂¥‡∑î‡∂ª‡∑Ä‡∂±‡∑ä‡∂±!");
                return;
            }

            // Check if user exists
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.find(u => u.name === name)) {
                showToast("‡∂∏‡∑ô‡∂∏ ‡∂±‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∂ª‡∑í‡∑Å‡∑ì‡∂Ω‡∂ö‡∂∫‡∑ô‡∂ö‡∑ä ‡∑É‡∑í‡∂ß‡∑ì.");
                return;
            }

            // Save user
            users.push({ name, pass });
            localStorage.setItem('users', JSON.stringify(users));
            showToast("‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í! Login ‡∑Ä‡∂±‡∑ä‡∂±.");
            navigate('login');
        }

        function login() {
            const name = document.getElementById('login-name').value.trim();
            const pass = document.getElementById('login-pass').value.trim();

            // Hardcoded Owner Check
            if (name === 'Shenal Anuhas' && pass === 'shenal11') {
                loginSuccess(name, true, true);
                return;
            }

            // Normal User Check
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const validUser = users.find(u => u.name === name && u.pass === pass);

            if (validUser) {
                loginSuccess(validUser.name, false, true);
            } else {
                showToast("‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂±‡∂∏‡∂ö‡∑ä ‡∑Ñ‡∑ù ‡∂∏‡∑î‡∂ª‡∂¥‡∂Ø‡∂∫‡∂ö‡∑ä!");
            }
        }

        function loginSuccess(name, ownerFlag, saveSession) {
            currentUser = name;
            isOwner = ownerFlag;

            // UI Updates
            document.getElementById('nav-login').style.display = 'none';
            document.getElementById('nav-register').style.display = 'none';
            document.getElementById('nav-logout').style.display = 'block';
            document.getElementById('user-display').style.display = 'flex';
            document.getElementById('username-span').innerText = name;

            if (isOwner) {
                document.getElementById('owner-display').style.display = 'flex';
            }

            if (saveSession) {
                localStorage.setItem('currentUser', JSON.stringify({ name, isOwner }));
            }
            
            showToast(`‡∑É‡∑è‡∂Ø‡∂ª‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑í‡∑Ö‡∑í‡∂ú‡∂±‡∑í‡∂∏‡∑î, ${name}!`);
            navigate('home');
            loadChat(); // Reload chat to show user status
        }

        function logout() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            isOwner = false;

            // Reset UI
            document.getElementById('nav-login').style.display = 'block';
            document.getElementById('nav-register').style.display = 'block';
            document.getElementById('nav-logout').style.display = 'none';
            document.getElementById('user-display').style.display = 'none';
            document.getElementById('owner-display').style.display = 'none';
            
            document.getElementById('login-name').value = '';
            document.getElementById('login-pass').value = '';

            showToast("Logout ‡∑Ä‡∑í‡∂∫.");
            navigate('home');
        }

        // --- Chat Room ---
        function loadChat() {
            const chatBox = document.getElementById('chat-box');
            const messages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
            
            chatBox.innerHTML = '';
            messages.forEach(msg => {
                appendMessageToUI(msg);
            });
            scrollToBottom();
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            
            if (!text || !currentUser) {
                if(!currentUser) showToast("Chat ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂¥‡∑Ö‡∂∏‡∑î‡∑Ä Login ‡∑Ä‡∂±‡∑ä‡∂±.");
                return;
            }

            const newMessage = {
                user: currentUser,
                text: text,
                isOwner: isOwner,
                time: new Date().toLocaleTimeString()
            };

            const messages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
            messages.push(newMessage);
            localStorage.setItem('chatMessages', JSON.stringify(messages));

            appendMessageToUI(newMessage);
            input.value = '';
            scrollToBottom();
        }

        function appendMessageToUI(msg) {
            const chatBox = document.getElementById('chat-box');
            const div = document.createElement('div');
            
            let className = 'message msg-left';
            if (msg.isOwner) className = 'message msg-owner';
            else if (msg.user === currentUser) className = 'message msg-right';

            div.innerHTML = `
                <span class="msg-sender">${msg.user} ${msg.isOwner ? '<i class="fas fa-crown"></i>' : ''} ‚Ä¢ ${msg.time}</span>
                ${msg.text}
            `;
            div.className = className;
            chatBox.appendChild(div);
        }

        function scrollToBottom() {
            const chatBox = document.getElementById('chat-box');
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function handleChatEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // --- Report System ---
        function submitReport() {
            const name = document.getElementById('rep-name').value.trim();
            const subject = document.getElementById('rep-subject').value.trim();
            const msg = document.getElementById('rep-msg').value.trim();

            if (!name || !subject || !msg) {
                showToast("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂ö‡∑ä‡∑Ç‡∑ö‡∂≠‡∑ä‚Äç‡∂ª ‡∂¥‡∑î‡∂ª‡∑Ä‡∂±‡∑ä‡∂±.");
                return;
            }

            const newReport = { name, subject, msg, date: new Date().toLocaleString() };
            
            // Save to "Simulated" file system (LocalStorage)
            const reports = JSON.parse(localStorage.getItem('reports') || '[]');
            reports.push(newReport);
            localStorage.setItem('reports', JSON.stringify(reports));

            // Simulate file saving
            console.log("Simulating save to creds.txt:", newReport);
            showToast("Report ‡∂ë‡∂ö ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä ‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø‡∑í! (Saved to creds.txt)");

            // Clear form
            document.getElementById('rep-name').value = '';
            document.getElementById('rep-subject').value = '';
            document.getElementById('rep-msg').value = '';
        }

        function loadReports() {
            const container = document.getElementById('report-list-container');
            const list = document.getElementById('report-list');
            
            if (!isOwner) {
                container.style.display = 'none';
                return;
            }

            container.style.display = 'block';
            const reports = JSON.parse(localStorage.getItem('reports') || '[]');
            
            if (reports.length === 0) {
                list.innerHTML = '<p style="text-align:center; opacity:0.7;">Reports ‡∂ö‡∑í‡∑É‡∑í‡∑Ä‡∂ö‡∑ä ‡∂±‡∑ê‡∂≠.</p>';
                return;
            }

            list.innerHTML = '';
            reports.forEach((rep, index) => {
                const item = document.createElement('div');
                item.className = 'report-item glass';
                item.innerHTML = `
                    <h4>#${index + 1} - ${rep.subject}</h4>
                    <small>By: ${rep.name} | ${rep.date}</small>
                    <p style="margin-top: 10px;">${rep.msg}</p>
                `;
                list.appendChild(item);
            });
        }
    </script>
</body>
</html>
